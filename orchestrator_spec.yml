# Spec-Driven Orchestrator Configuration
# Version: 1.0
# Date: 2025-11-14

# Phase workflow definition
phases:
  ANALYSIS:
    name: "ANALYSIS"
    description: "Clarify requirements through guided Q&A"
    owner: "analyst"
    duration_minutes: 30
    inputs: ["user_idea"]
    outputs: ["constitution.md", "project-brief.md", "personas.md"]
    next_phase: "STACK_SELECTION"
    validators: ["presence", "markdown_frontmatter", "content_quality"]
    
  STACK_SELECTION:
    name: "STACK_SELECTION"
    description: "Select and approve technology stack"
    owner: "architect"
    duration_minutes: 20
    inputs: ["project-brief.md", "personas.md"]
    outputs: ["plan.md", "README.md"]
    depends_on: ["ANALYSIS"]
    gates: ["stack_approved"]
    next_phase: "SPEC"
    validators: ["presence", "stack_approved"]
    
  SPEC:
    name: "SPEC"
    description: "Generate detailed specifications"
    owner: ["pm", "architect"]
    duration_minutes: 45
    inputs: ["project-brief.md", "personas.md", "approved_stack"]
    outputs: ["PRD.md", "data-model.md", "api-spec.json"]
    depends_on: ["ANALYSIS", "STACK_SELECTION"]
    next_phase: "DEPENDENCIES"
    validators: ["markdown_frontmatter", "api_openapi", "presence", "content_coverage"]
    
  DEPENDENCIES:
    name: "DEPENDENCIES"
    description: "Define and approve project dependencies"
    owner: "devops"
    duration_minutes: 30
    inputs: ["PRD.md", "approved_stack"]
    outputs: ["DEPENDENCIES.md", "dependency-proposal.md"]
    depends_on: ["SPEC"]
    gates: ["dependencies_approved"]
    next_phase: "SOLUTIONING"
    validators: ["presence", "dependencies_approved", "policy_check"]
    
  SOLUTIONING:
    name: "SOLUTIONING"
    description: "Create architecture and task breakdown"
    owner: ["architect", "scrummaster"]
    duration_minutes: 60
    inputs: ["PRD.md", "data-model.md", "api-spec.json", "DEPENDENCIES.md"]
    outputs: ["architecture.md", "epics.md", "tasks.md"]
    depends_on: ["SPEC", "DEPENDENCIES"]
    next_phase: "DONE"
    validators: ["markdown_frontmatter", "tasks_dag", "presence", "content_coverage"]
    
  DONE:
    name: "DONE"
    description: "Generate handoff and ZIP package"
    owner: "orchestrator"
    duration_minutes: 10
    inputs: ["all_previous_artifacts"]
    outputs: ["HANDOFF.md", "project.zip"]
    depends_on: ["SOLUTIONING"]
    validators: ["handoff_complete", "zip_created"]

# Technology stack options
stacks:
  nextjs_only_expo:
    name: "Next.js-Only + Expo"
    description: "Unified TypeScript codebase with Next.js App Router and Expo mobile"
    composition:
      frontend: "Next.js 14 (App Router)"
      mobile: "Expo with React Native"
      backend: "Next.js API routes / tRPC"
      database: "PostgreSQL with Prisma"
      deployment: "Vercel"
    best_for: ["MVPs", "dashboards", "CRUD SaaS", "low ops footprint"]
    strengths: ["Single language", "unified codebase", "fast iteration", "integrated API"]
    tradeoffs: ["Less suitable for heavy backend compute", "long-running jobs"]
    scaling: "Good for <10k DAU, existing managed infra"
    
  hybrid_nextjs_fastapi_expo:
    name: "Hybrid Next.js + FastAPI + Expo"
    description: "Decoupled services with Python backend for heavy compute"
    composition:
      frontend: "Next.js 14"
      mobile: "Expo with React Native"
      backend: "FastAPI (Python)"
      database: "PostgreSQL with SQLAlchemy"
      deployment: "Separate infra"
    best_for: ["AI/ETL/OCR", "long-running jobs", "heavier backend compute"]
    strengths: ["Decoupled services", "Python for data science/ML", "flexibility", "async workers"]
    tradeoffs: ["More operational complexity", "separate deployments"]
    scaling: "Good for 10k-100k DAU, complex backend logic"

# Agent definitions
agents:
  analyst:
    role: "Business Analyst and Product Strategist"
    perspective: "CEO/CPO"
    responsibilities:
      - "Ask clarifying questions to understand project vision"
      - "Generate constitution, project brief, and personas"
    prompt_template: |
      You are a Business Analyst and Product Strategist (CEO/CPO perspective).
      Your goal is to deeply understand the user's project vision and generate comprehensive analysis artifacts.

      ## Project Description:
      {{projectIdea}}

      ## Your Task:
      Based on the project description above, generate three markdown files with detailed analysis:

      1. **constitution.md** - Project guiding principles including:
         - Core values and mission
         - Strategic objectives
         - Success criteria
         - Key constraints and considerations

      2. **project-brief.md** - Comprehensive project overview including:
         - Executive summary
         - Vision and objectives
         - Target market analysis
         - Problem and solution fit
         - Competitive landscape
         - Key features and MVP scope
         - Success metrics and KPIs

      3. **personas.md** - 3-5 detailed user profiles including:
         - Demographics and background
         - Goals and motivations
         - Pain points and challenges
         - Use cases and scenarios
         - Technical proficiency

      ## Output Format:
      Each file must be in markdown format with front-matter.

      Use this format for each file:
      ```
      filename: <filename.md>
      ---
      title: <Title>
      owner: analyst
      version: 1.0
      date: <current-date>
      status: draft
      ---

      <content here>
      ```

      Generate all three files now.
      
  pm:
    role: "Product Manager"
    perspective: "CPO"
    responsibilities:
      - "Convert vision into concrete specifications"
      - "Document requirements comprehensively"
      - "Prioritize features and create PRD"
    prompt_template: |
      You are a Product Manager (CPO perspective).
      Your task: Create a detailed Product Requirements Document (PRD) based on the project brief and user personas.

      ## Context Documents:
      The project-brief.md and personas.md are provided as context documents.

      ## Your Task:
      Generate a comprehensive PRD.md with the following sections:

      1. **Executive Summary**
         - Project overview and vision
         - Target market and user base
         - Key value propositions

      2. **Functional Requirements** (numbered REQ-XXX-YYY format)
         - Each requirement must have a unique ID (e.g., REQ-AUTH-001, REQ-PAYMENT-001)
         - Link each requirement to one or more personas
         - Include clear acceptance criteria
         - Mark as either MVP (Phase 1) or Phase 2

      3. **Non-Functional Requirements**
         - Performance requirements
         - Security requirements
         - UX/accessibility requirements
         - Scalability requirements

      4. **Use Cases and User Flows**
         - Key user journeys
         - Edge cases and error handling
         - Integration points

      5. **Epics** (feature sets with IDs)
         - Logical grouping of related requirements
         - Each epic must have an ID (e.g., EPIC-001)

      6. **User Stories per Epic**
         - Format: "As a [persona], I want [goal] so that [benefit]"
         - Include acceptance criteria for each story

      7. **MVP Features vs Phase 2 Features**
         - Clear prioritization
         - Rationale for MVP scope

      8. **Success Criteria and KPIs**
         - Measurable success metrics
         - Target values and timelines

      ## Output Format:
      ```
      filename: PRD.md
      ---
      title: Product Requirements Document
      owner: pm
      version: 1.0
      date: <current-date>
      status: draft
      ---

      <content here>
      ```

      Generate the complete PRD now.
      
  architect:
    role: "Chief Architect"
    perspective: "CTO"
    responsibilities:
      - "Design system architecture"
      - "Make technology choices"
      - "Create data models and API specs"
    prompt_template: |
      You are a Chief Architect (CTO perspective).
      Your task varies based on the phase: {{phase}}

      ## Context:
      Project brief is provided as a context document.
      {{#if prd}}PRD is also provided as a context document.{{/if}}

      ## Phase-Specific Tasks:

      ### If phase is "stack_selection":
      Based on the project brief, propose two technology stack options.

      Generate **stack-proposal.md** with:
      1. **Option A: [Stack Name]**
         - Composition (frontend, mobile, backend, database, deployment)
         - Best suited for (use cases)
         - Strengths
         - Trade-offs
         - Estimated scaling capacity

      2. **Option B: [Stack Name]**
         - Same structure as Option A

      3. **Recommendation**
         - Which option you recommend and why
         - Cost implications
         - Team skill requirements

      Output format:
      ```
      filename: stack-proposal.md
      ---
      title: Technology Stack Proposal
      owner: architect
      version: 1.0
      date: <current-date>
      status: draft
      ---

      <content here>
      ```

      ### If phase is "spec":
      Based on the PRD, design the data model and API specification.

      Generate two files:

      1. **data-model.md** - Database schema including:
         - All tables with columns, data types, constraints
         - Relationships (foreign keys, indexes)
         - Enums and custom types
         - Sample data structure
         - Schema migration considerations

      2. **api-spec.json** - OpenAPI 3.0 specification including:
         - All REST endpoints
         - Request/response schemas
         - Authentication requirements
         - Error responses
         - Example requests/responses

      Output format for data-model.md:
      ```
      filename: data-model.md
      ---
      title: Data Model
      owner: architect
      version: 1.0
      date: <current-date>
      status: draft
      ---

      <content here>
      ```

      Output format for api-spec.json:
      ```
      filename: api-spec.json
      ```json
      {
        "openapi": "3.0.0",
        "info": {
          "title": "[Project Name] API",
          "version": "1.0.0",
          "description": "[Brief description]"
        },
        "paths": {
          "/endpoint": {
            "get": {
              "summary": "[Description]",
              "responses": {
                "200": {
                  "description": "Success",
                  "content": {
                    "application/json": {
                      "schema": { }
                    }
                  }
                }
              }
            }
          }
        }
      }
      ```

      ### If phase is "solutioning":
      Create a comprehensive architecture document.

      Generate **architecture.md** including:
      1. **System Overview**
         - High-level architecture diagram (in text/mermaid)
         - Component breakdown
         - Data flow

      2. **Technology Stack Details**
         - Approved stack from previous phase
         - Framework versions and configuration
         - Third-party services and integrations

      3. **Component Design**
         - Frontend architecture
         - Backend/API layer
         - Database layer
         - Mobile app (if applicable)
         - Authentication & authorization
         - File storage and media handling

      4. **Security Architecture**
         - Authentication flow
         - Authorization patterns
         - Data encryption
         - API security
         - OWASP Top 10 mitigation

      5. **Performance & Scalability**
         - Caching strategy
         - Database optimization
         - Load balancing
         - CDN usage
         - Estimated capacity

      6. **Implementation Patterns**
         - Code organization
         - Design patterns to use
         - State management approach
         - Error handling strategy
         - Testing approach

      7. **Deployment Architecture**
         - Environment strategy (dev/staging/prod)
         - CI/CD pipeline
         - Monitoring and logging
         - Backup and disaster recovery

      Output format:
      ```
      filename: architecture.md
      ---
      title: System Architecture
      owner: architect
      version: 1.0
      date: <current-date>
      status: draft
      ---

      <content here>
      ```

      All outputs must be technically sound, production-ready, and aligned with the PRD requirements.
      Generate the required files for phase: {{phase}}
      
  scrummaster:
    role: "Scrum Master and Project Manager"
    perspective: "VP Engineering"
    responsibilities:
      - "Break requirements into executable tasks"
      - "Plan execution and ensure nothing falls through cracks"
      - "Create epics and task breakdown"
    prompt_template: |
      You are a Scrum Master and Project Manager (VP Engineering perspective).
      Your task: Break requirements into executable tasks based on the PRD, architecture, data model, and API specification.

      ## Context Documents:
      The following documents are provided as context:
      - PRD.md (Product Requirements Document)
      - architecture.md (System Architecture)
      - data-model.md (Database Schema)
      - api-spec.json (API Specification)

      ## Your Task:
      Generate two comprehensive files for project execution:

      ### 1. epics.md
      Map each epic from the PRD with:
      - Epic ID and name
      - Requirements it covers (REQ-XXX-YYY references)
      - User stories included
      - Components involved (from architecture)
      - API endpoints needed (from api-spec)
      - Estimated effort
      - Priority (MVP or Phase 2)

      ### 2. tasks.md
      Create a detailed task list where each task includes:

      **Required Fields:**
      - **Task ID**: Unique identifier (TASK-001, TASK-002, etc.)
      - **Title**: Clear, action-oriented task name
      - **Epic**: Which epic this belongs to
      - **Requirement(s)**: Links to PRD requirements (REQ-XXX-YYY)
      - **User Story**: As a [persona], I want [goal] so that [benefit]
      - **Acceptance Criteria**: Specific, testable conditions for completion
      - **Architecture Reference**: Which component(s) from architecture.md
      - **Implementation Hints**: Technical guidance (patterns, libraries, approaches - NOT code)
      - **Dependencies**: Which tasks must be completed first (TASK-XXX)
      - **Complexity**: Small (2-4 hrs), Medium (4-6 hrs), or Large (6-8 hrs)
      - **Priority**: MVP (Phase 1) or Phase 2

      **Task Quality Standards:**
      - Tasks must be sequentially ordered with clear dependency chains
      - Each task must be self-contained (one logical unit of work)
      - Tasks should be implementable in 4-8 hours maximum
      - All tasks must have clear, testable acceptance criteria
      - No task should be blocked by circular dependencies

      **Output Format for epics.md:**
      ```
      filename: epics.md
      ---
      title: Project Epics
      owner: scrummaster
      version: 1.0
      date: <current-date>
      status: draft
      ---

      <content here>
      ```

      **Output Format for tasks.md:**
      ```
      filename: tasks.md
      ---
      title: Task Breakdown
      owner: scrummaster
      version: 1.0
      date: <current-date>
      status: draft
      ---

      <content here>
      ```

      Generate both files now, ensuring comprehensive coverage of all requirements and a clear execution path.
      
  devops:
    role: "DevOps Engineer"
    perspective: "Infrastructure & SRE"
    responsibilities:
      - "Ensure project is deployment-ready"
      - "Define dependencies and security policies"
      - "Create deployment and monitoring setup"
    prompt_template: |
      You are a DevOps Engineer (Infrastructure & SRE perspective).
      Your task: Define all project dependencies for the approved technology stack.

      ## Context:
      - PRD.md is provided as a context document
      - Stack information (from stack choice: {{stackChoice}}) is provided as context

      ## Your Task:
      Generate comprehensive dependency documentation for the approved stack.

      ### For Next.js-Only + Expo Stack:
      Generate **DEPENDENCIES.md** listing:

      **Frontend Dependencies:**
      - Next.js (version, rationale)
      - React (version)
      - TypeScript (version)
      - Tailwind CSS or UI library
      - State management (Zustand, Redux, etc.)
      - HTTP client (Axios, Fetch API)
      - Form handling
      - Validation libraries

      **Mobile Dependencies:**
      - Expo (version)
      - React Native
      - Shared code libraries
      - Navigation
      - Native modules needed

      **Backend Dependencies:**
      - API framework (tRPC, Hono, or Next.js API routes)
      - ORM (Prisma, Drizzle, etc.)
      - Authentication library
      - Validation (Zod, Yup)

      **Database:**
      - PostgreSQL driver (pg, @vercel/postgres)
      - Connection pooling
      - Migration tools

      **Testing:**
      - Unit testing (Vitest, Jest)
      - E2E testing (Playwright, Cypress)
      - Component testing

      **Development Tools:**
      - ESLint configuration
      - Prettier
      - Husky (git hooks)
      - TypeScript compiler
      - Build tools

      **Security & Monitoring:**
      - npm audit
      - Dependency scanning
      - Error tracking (Sentry)
      - Analytics

      ### For Hybrid Stack (Next.js + FastAPI + Expo):
      Include all above, PLUS:

      **Python Backend:**
      - FastAPI (version)
      - Pydantic
      - Uvicorn
      - SQLAlchemy
      - Alembic (migrations)
      - Python testing (pytest)
      - Python linting (ruff, black)
      - Security scanning (bandit, safety)

      ## For Each Dependency:
      Provide:
      1. **Name and Version**: Exact or range
      2. **Rationale**: WHY this dependency was chosen
      3. **Security**: License type (MIT, Apache 2.0, etc.) and any security considerations
      4. **Constraints**: Version constraints and compatibility notes
      5. **Status**: Note if deprecated, outdated, or has known issues

      ## Output Format:
      ```
      filename: DEPENDENCIES.md
      ---
      title: Project Dependencies
      owner: devops
      version: 1.0
      date: <current-date>
      status: draft
      ---

      # Project Dependencies

      ## Dependency Policy
      - No deprecated packages
      - No packages with HIGH or CRITICAL vulnerabilities
      - Regular security audits required
      - Keep dependencies up to date

      ## [Category Name]
      ### Package Name (version)
      - **Rationale**: Why we need this
      - **License**: MIT/Apache/etc
      - **Security**: Notes
      - **Constraints**: Version requirements
      - **Status**: Active/Stable

      ...
      ```

      Also generate **dependency-proposal.md** with:
      - Summary of dependency count by category
      - Total bundle size estimate
      - Security audit summary
      - Recommended update schedule
      - Alternative options considered

      Generate both files now based on stack choice: {{stackChoice}}

# Validation rules
validators:
  presence:
    description: "Check if all required files exist"
    implementation: "file_exists_check"
    
  markdown_frontmatter:
    description: "Ensure markdown files have required frontmatter"
    required_fields: ["title", "owner", "version", "date", "status"]
    implementation: "frontmatter_parser"
    
  content_quality:
    description: "Check content is not empty or obviously incomplete"
    min_length: 100
    implementation: "content_length_check"
    
  content_coverage:
    description: "Ensure sufficient content coverage"
    requirements:
      PRD.md: "at_least_5_requirements"
      data-model.md: "has_tables"
      api-spec.json: "has_endpoints"
      tasks.md: "at_least_10_tasks"
    implementation: "coverage_analysis"
    
  api_openapi:
    description: "Validate OpenAPI specification"
    version: "3.0"
    implementation: "openapi_validator"
    
  stack_approved:
    description: "Check if stack has been approved by user"
    implementation: "database_field_check"
    field: "stack_approved"
    expected_value: true
    
  dependencies_approved:
    description: "Check if dependencies have been approved by user"
    implementation: "database_field_check"
    field: "dependencies_approved"
    expected_value: true
    
  policy_check:
    description: "Run dependency policy scripts"
    scripts:
      - "npm_audit"
      - "pip_audit"
      - "no_deprecated"
      - "no_outdated"
    implementation: "script_execution"
    
  tasks_dag:
    description: "Ensure no circular dependencies in task list"
    implementation: "dependency_graph_analysis"
    
  handoff_complete:
    description: "Check HANDOFF.md is generated and complete"
    required_sections: ["project_context", "reading_order", "llm_prompt"]
    implementation: "handoff_validator"
    
  zip_created:
    description: "Verify ZIP archive is created and contains all files"
    required_files: ["HANDOFF.md", "constitution.md", "PRD.md", "architecture.md"]
    implementation: "zip_validation"

# Security baseline (applies to all projects)
security_baseline:
  authentication:
    - "All passwords hashed with bcrypt (cost 10+)"
    - "JWT tokens with 1-hour expiry"
    - "HTTPS only (no HTTP)"
    
  data_protection:
    - "Sensitive data encrypted at rest (AES-256)"
    - "TLS 1.2+ for transit"
    
  compliance:
    - "GDPR-ready user data handling"
    - "Audit logs for sensitive operations"
    - "PII never in logs"
    
  scanning:
    - "npm audit (zero HIGH/CRITICAL)"
    - "pip-audit (zero HIGH/CRITICAL)"
    - "SAST scanning (SonarQube or Snyk)"
    
  testing:
    - "Unit test coverage >80%"
    - "E2E tests for critical flows"
    - "Security-focused test cases"
# Frontend UI/UX Standards
frontend_ui_standards:
  component_library: "shadcn/ui"
  icon_library: "lucide-react"
  styling: "Tailwind CSS"

  initialization_commands:
    - "pnpm dlx shadcn@latest init"
    - description: "Initializes shadcn/ui, installs cn utility, configures Tailwind, and sets up CSS variables"

  default_approach: "shadcn/ui (unless project requirements specify otherwise)"

  hard_rules:
    - "Always use shadcn components over custom components (DEFAULT)"
    - "Never create components yourself unless explicitly requested"
    - "Always install components using the CLI: pnpm dlx shadcn@latest add <component>"
    - "Always use standard Tailwind and shadcn color palette"
    - "Never use inline custom colors"
    - "Use lucide-react for all icons (DEFAULT)"

  flexibility_clause:
    principle: "User-Driven Customization"
    description: "If the user explicitly requests alternative UI libraries or dependencies, honor that request"
    examples:
      - "User requests: 'Use Material-UI instead' → Switch to Material-UI"
      - "User requests: 'Add Framer Motion for animations' → Include Framer Motion"
      - "User requests: 'Use Bootstrap' → Switch to Bootstrap"
      - "User does not specify → Default to shadcn/ui"
    guidelines:
      - "Only deviate from shadcn/ui when user explicitly requests it in project brief or PRD"
      - "Document all alternative dependencies in DEPENDENCIES.md with rationale"
      - "Maintain accessibility and design consistency standards regardless of UI library choice"
      - "Update architecture.md to reflect non-standard UI decisions"

  common_components_to_install:
    - button: "Interactive action elements"
    - card: "Content containers with header/footer"
    - input: "Form input fields"
    - badge: "Status and tag labels"
    - dialog: "Modal dialogs and confirmations"
    - dropdown-menu: "Dropdown menus and navigation"
    - tabs: "Tabbed content sections"
    - select: "Select dropdowns"
    - textarea: "Multi-line text inputs"
    - form: "Form composition helpers"
    - alert: "Alert messages and notifications"
    - toast: "Toast notifications"

  color_system:
    primary: "Primary action color (default: slate-900)"
    secondary: "Secondary elements"
    destructive: "Dangerous actions (red)"
    muted: "Disabled or secondary text"
    accent: "Accent highlights"
    note: "Always use shadcn preset colors, never custom hex/rgb values inline"

  typography:
    - "Use Tailwind text utilities for all typography"
    - "Font sizes: text-xs, text-sm, text-base, text-lg, text-xl, text-2xl, text-4xl"
    - "Font weights: font-normal, font-medium, font-semibold, font-bold"
    - "Always apply proper contrast ratios for accessibility (WCAG AA minimum)"

  spacing_patterns:
    - "Use Tailwind spacing scale: p-2, p-4, p-6, p-8 for padding"
    - "Use gap-2, gap-4, gap-6, gap-8 for flex/grid gaps"
    - "Consistent margins: mb-4, mb-6, mb-8"

  responsive_design:
    - "Mobile-first approach"
    - "Use Tailwind breakpoints: sm, md, lg, xl, 2xl"
    - "Example: md:grid-cols-2 lg:grid-cols-3"

  accessibility:
    - "Use semantic HTML: <button>, <input>, <form>, <nav>"
    - "Include aria-labels for interactive elements"
    - "Ensure keyboard navigation works"
    - "Test with screen readers"
    - "Minimum touch target size: 44x44px"

  dev_setup:
    step_1: "pnpm dlx shadcn@latest init"
    step_2: "Add individual components as needed: pnpm dlx shadcn@latest add button"
    step_3: "Import and use in components: import { Button } from '@/components/ui/button'"
    step_4: "Follow shadcn/ui documentation at ui.shadcn.com for component patterns"

# File structure templates
file_structure:
  project_directory: "/projects/{slug}/"
  specs_directory: "/projects/{slug}/specs/"
  artifact_versioning: "v{version}/"
  
  zip_structure:
    root_files:
      - "constitution.md"
      - "project-brief.md"
      - "personas.md"
      - "README.md"
      - "HANDOFF.md"
    specs_folder:
      - "PRD.md"
      - "data-model.md"
      - "api-spec.json"
      - "architecture.md"
      - "epics.md"
      - "tasks.md"
      - "plan.md"
      - "DEPENDENCIES.md"
    config_folder:
      - ".ai-config/analyst_prompt.md"
      - ".ai-config/pm_prompt.md"
      - ".ai-config/architect_prompt.md"
      - ".ai-config/scrummaster_prompt.md"
      - ".ai-config/devops_prompt.md"
      - ".ai-config/validators.yml"
    docs_folder:
      - "docs/security-baseline.md"
      - "docs/DEPS_NOTES.md"

# LLM configuration
llm_config:
  provider: "gemini"
  model: "gemini-2.5-flash"
  max_tokens: 8192
  temperature: 0.7
  timeout_seconds: 120
  
  # Rate limiting and cost management
  rate_limit:
    requests_per_minute: 60
    tokens_per_hour: 100000
    
  cost_management:
    max_cost_per_project: 50.0  # USD
    token_cost_per_million: 0.5

# Project defaults
project_defaults:
  current_phase: "ANALYSIS"
  phases_completed: []
  stack_choice: null
  stack_approved: false
  dependencies_approved: false
  artifact_versions: {}
  zip_ready: false