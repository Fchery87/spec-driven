# ============================================================================
# ENVIRONMENT VARIABLES TEMPLATE
# Copy this file to .env and .env.local for development
# NEVER commit actual secrets to version control
# ============================================================================

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# Platform: Neon PostgreSQL (https://neon.tech)
# Free tier available for development
# Production: Use Neon paid tier with auto-scaling

# Get your connection string from: https://console.neon.tech/app/projects
# Format: postgresql://[user]:[password]@[host]/[database]?sslmode=require&channel_binding=require
# SSL/channel binding REQUIRED for Neon serverless
DATABASE_URL="postgresql://user:password@project-region.neon.tech/dbname?sslmode=require&channel_binding=require"

# ============================================================================
# LLM CONFIGURATION
# ============================================================================
# Multiple LLM providers supported. Configure at least one.
# API keys can also be entered via Admin > LLM Configuration UI (stored encrypted in DB)

# Google Gemini API (https://ai.google.dev/)
GEMINI_API_KEY="your_gemini_api_key_here"
# Optional: Gemini request throttling (helps avoid HTTP 429 in bursty phases)
# GEMINI_MAX_CONCURRENCY=1
# GEMINI_REQUESTS_PER_MINUTE=60
# Optional: override endpoint (advanced)
# GEMINI_BASE_URL="https://generativelanguage.googleapis.com/v1beta"

# OpenAI API (https://platform.openai.com/)
OPENAI_API_KEY="your_openai_api_key_here"

# Anthropic Claude API (https://docs.anthropic.com/)
ANTHROPIC_API_KEY="your_anthropic_api_key_here"

# Z.ai GLM API (https://docs.z.ai/)
ZAI_API_KEY="your_zai_api_key_here"

# Groq API - FREE! (https://console.groq.com/)
# Fast inference with Llama, Mixtral, Gemma models
GROQ_API_KEY="your_groq_api_key_here"

# DeepSeek API (https://platform.deepseek.com/)
# Best value: 64K output with deepseek-reasoner ($0.12/project)
DEEPSEEK_API_KEY="your_deepseek_api_key_here"

# ============================================================================
# AUTHENTICATION & SECURITY
# ============================================================================
# Better Auth configuration
# Generate new secrets with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Must be at least 32 characters

# Better Auth secret (primary - used for session signing)
BETTER_AUTH_SECRET="your-super-secret-auth-key-change-in-production-min-32-chars"

# Encryption key for secure API key storage in database (AES-256-GCM)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Required if you want to store API keys via the Admin UI
ENCRYPTION_KEY="your-64-character-hex-key-here-generate-with-command-above"

# Alternative: AUTH_SECRET (fallback if BETTER_AUTH_SECRET not set)
# AUTH_SECRET="your-super-secret-auth-key-change-in-production-min-32-chars"

# ============================================================================
# APPLICATION URLS
# ============================================================================
# Frontend URL (used in public contexts, visible to client)
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Auth service URL (backend)
AUTH_BASE_URL=http://localhost:3000

# ============================================================================
# OAUTH PROVIDERS (Optional)
# ============================================================================
# Only configure if implementing Google OAuth
# Get credentials from: https://console.cloud.google.com/
GOOGLE_CLIENT_ID="your-google-client-id"
GOOGLE_CLIENT_SECRET="your-google-client-secret"

# ============================================================================
# CORS & SECURITY
# ============================================================================
# Comma-separated list of allowed origins
# Development: http://localhost:3000,http://localhost:3001
# Production: https://your-domain.com
ALLOWED_ORIGINS="http://localhost:3000,http://localhost:3001"

# Node environment
NODE_ENV=development

# ============================================================================
# EMAIL CONFIGURATION (Optional)
# ============================================================================
# Only needed for password reset emails
# Uncomment and configure if using email verification

# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your-app-password
# EMAIL_FROM=noreply@example.com

# ============================================================================
# CLOUDFLARE R2 STORAGE (Required for Production)
# ============================================================================
# Platform: Cloudflare R2 (S3-compatible object storage)
# Get credentials from: https://dash.cloudflare.com/ > R2 > Manage R2 API Tokens
# Zero egress fees - recommended for artifact storage

# Your Cloudflare Account ID (found in dashboard URL or account settings)
# Supports both naming conventions:
R2_ACCOUNT_ID="your-cloudflare-account-id"
# CLOUDFLARE_ACCOUNT_ID="your-cloudflare-account-id"

# R2 API Token credentials (create at R2 > Manage R2 API Tokens)
R2_ACCESS_KEY_ID="your-r2-access-key-id"
R2_SECRET_ACCESS_KEY="your-r2-secret-access-key"
# Alternative naming:
# CLOUDFLARE_ACCESS_KEY_ID="your-r2-access-key-id"
# CLOUDFLARE_SECRET_ACCESS_KEY="your-r2-secret-access-key"

# R2 Bucket name (create at R2 > Create Bucket)
R2_BUCKET_NAME="spec-driven-artifacts"

# ============================================================================
# OPTIONAL: OBSERVABILITY & LOGGING
# ============================================================================
# Enable detailed logging for debugging
# LOG_LEVEL=debug

# ============================================================================
# PRODUCTION CHECKLIST
# ============================================================================
# Before deploying to production:
# [ ] Generate new JWT_SECRET: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# [ ] Set NODE_ENV=production
# [ ] Update NEXT_PUBLIC_APP_URL to production domain
# [ ] Update AUTH_BASE_URL to production domain
# [ ] Update ALLOWED_ORIGINS to production domain
# [ ] Use production Neon database instance
# [ ] Configure Cloudflare R2 bucket and API tokens
# [ ] Set GOOGLE_CLIENT_ID and GOOGLE_CLIENT_SECRET if using OAuth
# [ ] Configure SMTP for email notifications (if needed)
# [ ] Use environment variables from deployment platform (Vercel, AWS, etc.)
# [ ] NEVER commit secrets to git

# ============================================================================
# MCP (MODEL CONTEXT PROTOCOL) CONFIGURATION
# ============================================================================
# MCP tools provide accurate code pattern lookups for frontend generation.
# Configure API keys in your MCP configuration file (~/.config/claude/mcp.json)
# or in the Admin UI at Admin > LLM Configuration.
#
# Available MCP Tools:
# - exa-code: Search code libraries, SDKs, and APIs (https://exa.ai)
# - context7: Query library documentation (https://context7.com)
# - web-search: Find recent code patterns and examples
#
# Example MCP config (~/.config/claude/mcp.json):
# {
#   "mcpServers": {
#     "exa-code": {
#       "command": "uvx",
#       "args": ["exa-code-mcp", "--api-key", "your-exa-api-key"]
#     },
#     "context7": {
#       "command": "npx",
#       "args": ["-y", "@context7/mcp-server", "--api-key", "your-context7-api-key"]
#     }
#   }
# }
#
# API Keys (get from respective service dashboards):
# EXA_CODE_API_KEY="your-exa-api-key"
# CONTEXT7_API_KEY="your-context7-api-key"
