# ============================================================================
# PRODUCTION ENVIRONMENT VARIABLES
# ============================================================================
# CRITICAL: This file contains ONLY TEMPLATES with placeholders
# NEVER commit actual secrets to version control
#
# Setup instructions:
# 1. For Vercel: Use Vercel Dashboard -> Settings -> Environment Variables
# 2. For AWS/Heroku/Other: Use platform's secrets manager
# 3. For Docker: Use --env-file or docker-compose.yml
# 4. For Local Production Testing: Create .env.production.local (not committed)
#
# IMPORTANT: Do NOT edit this file with real secrets
# ============================================================================

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# Production Neon PostgreSQL instance
# Connection string format: postgresql://[user]:[password]@[host]/[database]?sslmode=require&channel_binding=require
#
# How to get your production connection string:
# 1. Go to https://console.neon.tech/
# 2. Select production project/database
# 3. Click "Connection string" and select "Pooled connection" for serverless
# 4. Copy the full connection string
#
# SSL mode: REQUIRED for Neon
# Channel binding: REQUIRED for Neon secure pooling
#
# WARNING: Do NOT expose this in logs or error messages
DATABASE_URL="postgresql://[user]:[password]@[host]/[database]?sslmode=require&channel_binding=require"

# ============================================================================
# LLM CONFIGURATION
# ============================================================================
# Google Gemini API Key
# Production should use a dedicated API key with restricted permissions
#
# How to get/rotate your key:
# 1. Go to https://console.cloud.google.com/
# 2. Navigate to APIs & Services > Credentials
# 3. Create new API key (or rotate existing)
# 4. Restrict to "Generative Language API"
# 5. Set application restrictions (optional but recommended)
#
# Recommended: Use a service account key instead of API key for production
# See: https://cloud.google.com/docs/authentication/production
GEMINI_API_KEY="your-production-gemini-api-key-min-32-chars"

# ============================================================================
# AUTHENTICATION & SECURITY
# ============================================================================
# JWT Secret for production
# CRITICAL: This MUST be different from development!
# Generate new secret:
#   node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# Requirements:
# - Minimum 32 characters (256 bits)
# - Cryptographically random
# - Changed every 6-12 months for key rotation
# - Never shared or logged
#
# If compromised, regenerate immediately and all active sessions will need re-authentication
JWT_SECRET="generate-new-32-char-random-secret-for-production"

# Token expiration time (same as development, can be adjusted)
JWT_EXPIRES_IN=24h

# ============================================================================
# APPLICATION URLS
# ============================================================================
# Production domain (where your app is deployed)
# Must match exactly - including protocol (https, not http)
#
# Examples:
#   https://spec-driven.yourdomain.com
#   https://your-app.vercel.app
#   https://your-app-name.herokuapp.com
NODE_ENV=production
NEXT_PUBLIC_APP_URL="https://your-production-domain.com"

# Auth service URL (same as NEXT_PUBLIC_APP_URL in most cases)
AUTH_BASE_URL="https://your-production-domain.com"

# ============================================================================
# CORS & SECURITY
# ============================================================================
# Comma-separated list of allowed origins
# CRITICAL: Only include trusted domains
# Browsers will reject requests from other origins
#
# Examples:
#   https://your-domain.com
#   https://www.your-domain.com
#   https://app.your-domain.com
#
# DO NOT use wildcards (*) in production
ALLOWED_ORIGINS="https://your-production-domain.com"

# ============================================================================
# OAUTH PROVIDERS (Optional)
# ============================================================================
# Google OAuth credentials
# Only needed if enabling Google sign-in
#
# How to create credentials:
# 1. Go to https://console.cloud.google.com/
# 2. Create OAuth 2.0 credentials (Web application)
# 3. Set authorized redirect URIs:
#    - https://your-domain.com/api/auth/callback/google
# 4. Copy Client ID and Client Secret
#
# Best Practice: Use different credentials for dev and production
GOOGLE_CLIENT_ID="production-google-client-id"
GOOGLE_CLIENT_SECRET="production-google-client-secret"

# ============================================================================
# EMAIL CONFIGURATION (For Password Reset / Notifications)
# ============================================================================
# SMTP configuration for sending password reset and notification emails
# Only configure if your app needs to send emails
#
# Gmail example:
#   SMTP_HOST=smtp.gmail.com
#   SMTP_PORT=587
#   SMTP_USER=your-service-email@gmail.com
#   SMTP_PASS=your-app-specific-password (NOT your regular password)
#
# See: https://support.google.com/accounts/answer/185833
#
# Other providers: SendGrid, Mailgun, AWS SES, etc.
# Uncomment and configure if needed:

# SMTP_HOST="smtp.gmail.com"
# SMTP_PORT="587"
# SMTP_USER="your-production-email@gmail.com"
# SMTP_PASS="your-app-specific-password"
# EMAIL_FROM="noreply@your-production-domain.com"

# ============================================================================
# OBSERVABILITY & MONITORING (Optional)
# ============================================================================
# Enable detailed logging for production debugging
# Recommended: "warn" or "error" for production
# Can be increased to "info" or "debug" for troubleshooting

# LOG_LEVEL="error"

# If using external logging service (Sentry, DataDog, etc.)
# SENTRY_DSN="your-sentry-dsn"
# DATADOG_API_KEY="your-datadog-api-key"

# ============================================================================
# CLOUDFLARE R2 STORAGE (Object Storage)
# ============================================================================
# R2 replaces AWS S3 with zero egress fees
# Free tier: 10GB storage, 1M Class A ops, 10M Class B ops per month
#
# Get credentials from: https://dash.cloudflare.com/ → R2 → API Tokens
# 1. Create API Token with Admin Read & Write permissions
# 2. Copy Access Key ID and Secret Access Key
# 3. Find Account ID in R2 bucket details
#
# How to create the bucket:
# 1. Go to https://dash.cloudflare.com/
# 2. Click R2 → Create bucket
# 3. Name: spec-driven-artifacts
# 4. Choose region or use default
#
CLOUDFLARE_ACCOUNT_ID="your-account-id"
CLOUDFLARE_ACCESS_KEY_ID="your-access-key-id"
CLOUDFLARE_SECRET_ACCESS_KEY="your-secret-access-key"
R2_BUCKET_NAME="spec-driven-artifacts"

# ============================================================================
# DEPLOYMENT-SPECIFIC VARIABLES
# ============================================================================
# Add any deployment platform specific variables here
# Examples:
#   VERCEL_ENV=production
#   AWS_REGION=us-east-1
#   RAILWAY_ENVIRONMENT_NAME=production

# ============================================================================
# SECURITY CONSIDERATIONS
# ============================================================================
# 1. Never log or expose these variables in error messages
# 2. Rotate secrets every 6-12 months
# 3. Use strong, cryptographically random values
# 4. Restrict database user permissions to minimum needed
# 5. Use HTTPS only (enforce in headers)
# 6. Monitor for unauthorized access
# 7. Audit environment variable access logs
# 8. Use dedicated service accounts where possible
# 9. Enable MFA on all admin accounts
# 10. Keep dependencies updated (npm audit)

# ============================================================================
# DEPLOYMENT CHECKLIST
# ============================================================================
# Before going live:
# [ ] All placeholder values replaced with actual production values
# [ ] Database connection tested from production environment
# [ ] JWT_SECRET is cryptographically random and >= 32 chars
# [ ] NODE_ENV=production
# [ ] NEXT_PUBLIC_APP_URL uses HTTPS
# [ ] AUTH_BASE_URL uses HTTPS
# [ ] ALLOWED_ORIGINS contains only trusted domains (no wildcards)
# [ ] Google OAuth credentials configured (if using)
# [ ] SMTP configured for email notifications (if needed)
# [ ] Cloudflare R2 credentials configured (CLOUDFLARE_ACCOUNT_ID, tokens, bucket name)
# [ ] Secrets stored in platform's secret manager, NOT in this file
# [ ] This file contains ONLY placeholders in git
# [ ] Production environment uses different secrets than staging/dev
# [ ] SSL certificate is valid and will not expire
# [ ] Rate limiting is configured
# [ ] Error handling doesn't expose sensitive information
# [ ] Database backups are configured
# [ ] Monitoring/alerting is set up
# ENCRYPTION_KEY=7b40e39a82dae3984b9f4ba60358436210497852508a91d9900810aa1a6d6901243c7bd93439f35b433dc7c295cc45e2cc773c710611a2eec7ab15a2482c54b1
